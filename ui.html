<style>
  #inputArea {
    display: none;
  }
</style>
<textarea name="" id="inputArea" cols="30" rows="10"></textarea>
<script>
  function getConnector(template) {
    if (template) {
      const input = document.getElementById("inputArea");
      input.focus();
      input.value = template;
      document.execCommand("copy");
      input.blur();
      parent.postMessage({ pluginMessage: { type: "FOCUS_ON_CANVAS" } }, "*");
    }
  }

  onmessage = (event) => {
    const { type, data } = event.data.pluginMessage;
    switch (type) {
      case "GET_INIT_CONNECTOR":
        getConnector(data.connectorTemplate);
        return;
    }
  };

  document.addEventListener("copy", function (event) {
    event.preventDefault();
    const clipboard = event.clipboardData || window.clipboardData;
    clipboard.setData("text/html", document.getElementById("inputArea").value);
  });
</script>
